{"version":3,"sources":["webpack:///./src/modules/account/components/AccountView.vue?4e02","webpack:///./src/modules/account/components/AccountView.vue","webpack:///./src/modules/account/components/AccountView.vue?c062","webpack:///./src/modules/account/components/AccountView.vue?1cc9","webpack:///./src/modules/account/components/AccountView.vue?18e3","webpack:///./src/utils/promiseDelay.ts","webpack:///./src/utils/setErrorMessage.ts"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","mode","verifyActionCode","_e","on","$event","preventDefault","setNewPassword","attrs","error","el","message","scopedSlots","_u","key","fn","ref","label","model","value","callback","$$v","newPassword","expression","newPasswordConfirm","staticRenderFns","extend","name","components","data","$route","query","actionCode","String","oobCode","email","loading","methods","signInUser","showNotification","type","password","$router","push","setErrorMessage","created","component","delay","ms","Promise","resolve","setTimeout","_error","console","log","code","dispatch"],"mappings":"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","file":"js/account.225e6c83.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-layout',{staticClass:\"screen-account\"},[_c('app-header',[_vm._v(\"Reset your password\")]),_c('main',[(_vm.mode === 'resetPassword' && !_vm.verifyActionCode)?_c('form',{staticClass:\"account-resetpassword\",on:{\"submit\":function($event){$event.preventDefault();return _vm.setNewPassword($event)}}},[_c('label-group',{attrs:{\"id\":\"account-newpw\",\"label\":\"New password *\",\"error\":_vm.error.el === 'newPassword' && _vm.error.message},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar label = ref.label;\nreturn [_c('v-input',{attrs:{\"type\":\"password\",\"placeholder\":\"********\",\"id\":\"account-newpw\",\"autocomplete\":\"new-password\",\"aria-describedby\":label,\"error\":_vm.error.el === 'newPassword',\"error-message\":_vm.error.message,\"aria-invalid\":_vm.error.el === 'newPassword',\"data-cy\":\"account-form-newpassword\"},model:{value:(_vm.newPassword),callback:function ($$v) {_vm.newPassword=$$v},expression:\"newPassword\"}})]}}],null,false,3665096122)}),_c('label-group',{attrs:{\"id\":\"account-newpw-confirm\",\"label\":\"Confirm new password *\",\"error\":_vm.error.el === 'newPasswordConfirm' && _vm.error.message},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar label = ref.label;\nreturn [_c('v-input',{attrs:{\"type\":\"password\",\"placeholder\":\"********\",\"id\":\"account-newpw-confirm\",\"aria-describedby\":label,\"error\":_vm.error.el === 'newPasswordConfirm',\"error-message\":_vm.error.message,\"aria-invalid\":_vm.error.el === 'newPasswordConfirm',\"data-cy\":\"account-form-newpassword\"},model:{value:(_vm.newPasswordConfirm),callback:function ($$v) {_vm.newPasswordConfirm=$$v},expression:\"newPasswordConfirm\"}})]}}],null,false,1101735017)}),_c('div',{staticClass:\"account-resetpassword-actions\"},[_c('router-link',{staticClass:\"account-resetpassword-return\",attrs:{\"to\":\"/login\",\"data-cy\":\"account-resetpassword-return\"}},[_c('feather-left'),_c('v-text',{attrs:{\"color\":\"special\"}},[_vm._v(\"Back to login\")])],1),_c('v-button',{attrs:{\"color\":\"yellow\",\"type\":\"submit\",\"data-cy\":\"account-resetpassword-submit\"}},[(_vm.loading)?_c('feather-loader'):_vm._e(),_vm._v(\"Reset password \")],1)],1)],1):_vm._e()]),_c('footer-no-auth')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport { mapActions } from 'vuex'\nimport { verifyPasswordResetCode, confirmNewPassword } from '@/services/firebase'\nimport logger from '@/utils/vueLogger'\nimport setErrorMessage from '@/utils/setErrorMessage'\nimport delay from '@/utils/promiseDelay'\n\nexport default Vue.extend({\n  name: 'Account',\n  components: {\n    'feather-left': () =>\n      import('vue-feather-icons/icons/ArrowLeftIcon' /* webpackChunkName: \"icons\" */),\n    'feather-loader': () =>\n      import('vue-feather-icons/icons/LoaderIcon' /* webpackChunkName: \"icons\" */),\n  },\n  data() {\n    return {\n      mode: this.$route.query.mode,\n      actionCode: String(this.$route.query.oobCode),\n      verifyActionCode: false,\n      email: null,\n      newPassword: null,\n      newPasswordConfirm: null,\n      loading: false,\n      error: { el: null, message: null },\n    }\n  },\n  methods: {\n    ...mapActions({\n      signInUser: 'account/signInUser',\n      showNotification: 'notifications/show',\n    }),\n    async setNewPassword() {\n      this.error.el = null\n      this.error.message = null\n\n      if (this.newPassword !== this.newPasswordConfirm) {\n        this.error.el = 'newPasswordConfirm'\n        this.error.message = \"Password doesn't match\"\n        return\n      }\n\n      this.loading = true\n      try {\n        await confirmNewPassword(this.actionCode, this.newPasswordConfirm)\n        await this.signInUser({\n          type: 'email',\n          email: this.email,\n          password: this.newPasswordConfirm,\n        })\n        await delay(2000)\n        this.$router.push('/home')\n      } catch (error) {\n        logger(`setNewPassword() => ${error.message}`, true)\n        this.error = setErrorMessage(error)\n      } finally {\n        this.loading = false\n      }\n    },\n  },\n  async created() {\n    if (this.mode === 'resetPassword') {\n      this.verifyActionCode = true\n      try {\n        this.email = await verifyPasswordResetCode(this.actionCode)\n      } catch (error) {\n        logger(`Account#created() => ${error.message}`, true)\n        this.showNotification({\n          type: 'alert',\n          message: 'An error occured, unable to reset your password. Please try again.',\n        })\n      } finally {\n        this.verifyActionCode = false\n      }\n    }\n  },\n})\n","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AccountView.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AccountView.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./AccountView.vue?vue&type=template&id=bc450e1e&scoped=true&\"\nimport script from \"./AccountView.vue?vue&type=script&lang=ts&\"\nexport * from \"./AccountView.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./AccountView.vue?vue&type=style&index=0&id=bc450e1e&lang=postcss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bc450e1e\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AccountView.vue?vue&type=style&index=0&id=bc450e1e&lang=postcss&scoped=true&\"","export default async function delay(ms = 2000): Promise<void> {\r\n  return new Promise((resolve) => setTimeout(resolve, ms))\r\n}\r\n","import { FirebaseError } from 'firebase'\r\nimport store from '@/store'\r\n\r\nexport interface FormErrorObject {\r\n  el: string | null\r\n  message: string | null\r\n}\r\n\r\n/**\r\n * Returns an error object for handling forms.\r\n * Its default switch case has a side-effect:\r\n * dispatch the error via Vuex to global notification component\r\n */\r\nexport default function setErrorMessage(error: FirebaseError): FormErrorObject {\r\n  const _error: FormErrorObject = { el: null, message: null }\r\n  console.log(error)\r\n\r\n  switch (error.code) {\r\n    case 'auth/email-already-in-use':\r\n    case 'auth/invalid-email':\r\n    case 'auth/user-not-found':\r\n      _error.el = 'email'\r\n      _error.message = error.message\r\n      break\r\n    case 'auth/weak-password':\r\n      _error.el = 'password'\r\n      _error.message = error.message\r\n      break\r\n    case 'auth/wrong-password':\r\n      _error.el = 'password'\r\n      _error.message = 'Your password seems wrong. Please re-check.'\r\n      break\r\n    default:\r\n      store.dispatch('notifications/show', {\r\n        type: 'alert',\r\n        error: error.message,\r\n      })\r\n  }\r\n\r\n  return _error\r\n}\r\n"],"sourceRoot":""}